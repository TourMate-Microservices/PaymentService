basePath: /
definitions:
  entity.Feedback:
    properties:
      content:
        type: string
      createdDate:
        type: string
      customerId:
        type: integer
      feedbackId:
        type: integer
      invoiceId:
        type: integer
      isDeleted:
        type: boolean
      rating:
        type: integer
      serviceId:
        type: integer
      tourGuideId:
        type: integer
      updatedAt:
        type: string
    type: object
  entity.Payment:
    properties:
      accountId:
        type: integer
      createdAt:
        type: string
      customerId:
        type: integer
      paymentId:
        description: PaymentType   string    `json:"paymentType"` // bo^' bo? theo
          y' m
        type: integer
      paymentMethod:
        type: string
      price:
        type: number
    type: object
  entity.PlatformFeedback:
    properties:
      account_id:
        type: integer
      content:
        type: string
      created_at:
        type: string
      feedback_id:
        type: integer
      payment_id:
        type: integer
      rating:
        type: integer
    type: object
  pb.TourServiceRatingResponse:
    properties:
      rating:
        type: number
      reviewCount:
        type: integer
    type: object
  request.CreateFeedbackRequest:
    properties:
      content:
        type: string
      customerId:
        type: integer
      invoiceId:
        type: integer
      rating:
        type: integer
      serviceId:
        type: integer
      tourGuideId:
        type: integer
    required:
    - content
    - customerId
    - invoiceId
    - rating
    - serviceId
    - tourGuideId
    type: object
  request.CreatePaymentRequest:
    properties:
      accountId:
        type: integer
      customerId:
        type: integer
      paymentMethod:
        type: string
      price:
        type: number
    required:
    - accountId
    - customerId
    - paymentMethod
    - price
    type: object
  request.CreatePlatformFeedbackRequest:
    properties:
      account_id:
        type: integer
      content:
        type: string
      payment_id:
        type: integer
      rating:
        type: integer
    required:
    - account_id
    - payment_id
    - rating
    type: object
  request.RemoveFeedbackRequest:
    properties:
      actorId:
        type: integer
      feedbackId:
        type: integer
    required:
    - actorId
    - feedbackId
    type: object
  request.UpdateFeedbackRequest:
    properties:
      content:
        type: string
      rating:
        type: integer
      request:
        $ref: '#/definitions/request.RemoveFeedbackRequest'
    type: object
  request.UpdatePaymentRequest:
    properties:
      method:
        type: string
      paymentId:
        type: integer
    required:
    - paymentId
    type: object
  request.UpdatePlatformFeedbackRequest:
    properties:
      actor_id:
        type: integer
      content:
        type: string
      feedback_id:
        type: integer
      rating:
        type: integer
    required:
    - actor_id
    - feedback_id
    type: object
  response.MessageApiResponse:
    properties:
      message:
        type: string
    type: object
  response.PaginationDataResponse:
    properties:
      data: {}
      has_next:
        type: boolean
      has_previous:
        type: boolean
      page:
        type: integer
      per_page:
        type: integer
      total_count:
        type: integer
      total_pages:
        type: integer
    type: object
  response.UrlResponse:
    properties:
      url:
        type: string
    type: object
host: localhost:8080
info:
  contact: {}
  description: API for Payment service
  title: Tourmate - Payment Service API
  version: "1.0"
paths:
  /api/v1/platform-feedbacks:
    get:
      consumes:
      - application/json
      description: Retrieve a paginated list of platform feedbacks with optional filters
      parameters:
      - description: Page number
        in: query
        name: page_number
        type: integer
      - description: Search keyword
        in: query
        name: keyword
        type: string
      - description: Filter property
        in: query
        name: filter_prop
        type: string
      - description: Sort order (ASC or DESC)
        in: query
        name: order
        type: string
      - description: Account ID
        in: query
        name: account_id
        type: integer
      - description: Rating
        in: query
        name: rating
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.PaginationDataResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Get all platform feedbacks
      tags:
      - platform-feedbacks
    post:
      consumes:
      - application/json
      parameters:
      - description: Create Platform Feedback Request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.CreatePlatformFeedbackRequest'
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "401":
          description: You have no rights to access this action.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "500":
          description: There is something wrong in the system during the process.
            Please try again later.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Create a new feedback
      tags:
      - platform-feedbacks
    put:
      consumes:
      - application/json
      parameters:
      - description: Update Feedback Request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.UpdatePlatformFeedbackRequest'
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "401":
          description: You have no rights to access this action.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "500":
          description: There is something wrong in the system during the process.
            Please try again later.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Update an existing feedback
      tags:
      - platform-feedbacks
  /api/v1/platform-feedbacks/{id}:
    get:
      consumes:
      - application/json
      parameters:
      - description: Platform Feedback ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/entity.PlatformFeedback'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Get a single platform feedback by ID
      tags:
      - platform-feedbacks
  /api/v1/platform-feedbacks/user/{id}:
    get:
      consumes:
      - application/json
      description: Retrieve platform feedbacks filtered by customer ID
      parameters:
      - description: Account ID
        in: path
        name: id
        required: true
        type: integer
      - description: Page number
        in: query
        name: page_number
        type: integer
      - description: Search keyword
        in: query
        name: keyword
        type: string
      - description: Filter property
        in: query
        name: filter_prop
        type: string
      - description: Sort order (ASC or DESC)
        in: query
        name: order
        type: string
      - description: Rating
        in: query
        name: rating
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.PaginationDataResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Get platform feedbacks by user
      tags:
      - platform-feedbacks
  /payment-service/api/v1/feedbacks:
    delete:
      consumes:
      - application/json
      parameters:
      - description: Remove Feedback Request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.RemoveFeedbackRequest'
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "401":
          description: You have no rights to access this action.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "500":
          description: There is something wrong in the system during the process.
            Please try again later.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Remove a feedback
      tags:
      - feedbacks
    get:
      consumes:
      - application/json
      description: Retrieve a paginated list of feedbacks with optional filters
      parameters:
      - description: Page
        in: query
        name: page
        type: integer
      - description: Search keyword
        in: query
        name: keyword
        type: string
      - description: Filter property
        in: query
        name: filterProp
        type: string
      - description: Sort order (ASC or DESC)
        in: query
        name: order
        type: string
      - description: Rating
        in: query
        name: rating
        type: integer
      - description: The owner ID of this feedback
        in: query
        name: customerId
        type: integer
      - description: Tour guide ID
        in: query
        name: tourGuideId
        type: integer
      - description: Invoice ID
        in: query
        name: invoiceId
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.PaginationDataResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Get all feedbacks
      tags:
      - feedbacks
    post:
      consumes:
      - application/json
      parameters:
      - description: Create Feedback Request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.CreateFeedbackRequest'
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "401":
          description: You have no rights to access this action.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "500":
          description: There is something wrong in the system during the process.
            Please try again later.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Create a new feedback
      tags:
      - feedbacks
    put:
      consumes:
      - application/json
      parameters:
      - description: Update Feedback Request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.UpdateFeedbackRequest'
      produces:
      - application/json
      responses:
        "200":
          description: success
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "401":
          description: You have no rights to access this action.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "500":
          description: There is something wrong in the system during the process.
            Please try again later.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Update an existing feedback
      tags:
      - feedbacks
  /payment-service/api/v1/feedbacks/{id}:
    get:
      consumes:
      - application/json
      parameters:
      - description: Feedback ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/entity.Feedback'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Get a single feedback by ID
      tags:
      - feedbacks
  /payment-service/api/v1/feedbacks/test-grpc/{id}:
    get:
      consumes:
      - application/json
      description: Calls the gRPC feedback service to retrieve average rating and
        total count for a tour service
      parameters:
      - description: Tour service ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/pb.TourServiceRatingResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "401":
          description: You have no rights to access this action.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "500":
          description: There is something wrong in the system during the process.
            Please try again later.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      summary: Test gRPC call to get payment service rating
      tags:
      - test-grpc
  /payment-service/api/v1/feedbacks/tourGuide/{id}:
    get:
      consumes:
      - application/json
      description: Retrieves a paginated list of feedbacks to a specific tour guide
      parameters:
      - description: Page number for pagination (starts from 1)
        in: query
        name: page
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.PaginationDataResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      summary: Get feedbacks of a tour guide
      tags:
      - feedbacks
  /payment-service/api/v1/feedbacks/user/{id}:
    get:
      consumes:
      - application/json
      description: Retrieve feedbacks filtered by customer ID
      parameters:
      - description: Customer ID
        in: path
        name: id
        required: true
        type: integer
      - description: Page
        in: query
        name: page
        type: integer
      - description: Search keyword
        in: query
        name: keyword
        type: string
      - description: Filter property
        in: query
        name: filterProp
        type: string
      - description: Sort order (ASC or DESC)
        in: query
        name: order
        type: string
      - description: Rating
        in: query
        name: rating
        type: integer
      - description: Tour guide ID
        in: query
        name: tourGuideId
        type: integer
      - description: Invoice ID
        in: query
        name: invoiceId
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.PaginationDataResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Get feedbacks by user
      tags:
      - feedbacks
  /payment-service/api/v1/payments:
    get:
      consumes:
      - application/json
      description: Retrieve a paginated list of payments
      parameters:
      - description: Page number
        in: query
        name: page
        type: integer
      - description: Payment method
        in: query
        name: method
        type: string
      - description: Customer ID
        in: query
        name: customerId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.PaginationDataResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "401":
          description: You have no rights to access this action.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "500":
          description: There is something wrong in the system during the process.
            Please try again later.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Get all payments
      tags:
      - payments
  /payment-service/api/v1/payments/{id}:
    get:
      description: Retrieve a single payment record by its ID
      parameters:
      - description: Payment ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/entity.Payment'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "401":
          description: You have no rights to access this action.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "500":
          description: There is something wrong in the system during the process.
            Please try again later.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Get payment by ID
      tags:
      - payments
  /payment-service/api/v1/payments/callback-cancel:
    get:
      consumes:
      - application/json
      description: Handles redirect or callback after canceled payment
      parameters:
      - description: Customer ID
        in: query
        name: customerId
        required: true
        type: integer
      - description: Account ID
        in: query
        name: accountId
        required: true
        type: integer
      - description: Payment Method
        in: query
        name: paymentMethod
        required: true
        type: string
      - description: Price of the transaction
        in: query
        name: price
        required: true
        type: number
      - description: Order Code
        in: query
        name: orderCode
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      summary: Callback after canceled payment
      tags:
      - payments
  /payment-service/api/v1/payments/callback-success:
    get:
      consumes:
      - application/json
      description: Handles redirect or callback after successful payment
      parameters:
      - description: Customer ID
        in: query
        name: customerId
        required: true
        type: integer
      - description: Account ID
        in: query
        name: accountId
        required: true
        type: integer
      - description: Payment Method
        in: query
        name: paymentMethod
        required: true
        type: string
      - description: Price of the transaction
        in: query
        name: price
        required: true
        type: number
      - description: Order Code
        in: query
        name: orderCode
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      summary: Callback after successful payment
      tags:
      - payments
  /payment-service/api/v1/payments/create:
    post:
      consumes:
      - application/json
      description: Creates a new payment and returns redirect info or confirmation
      parameters:
      - description: Create Payment Request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.CreatePaymentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.UrlResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "401":
          description: You have no rights to access this action.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "500":
          description: There is something wrong in the system during the process.
            Please try again later.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Create a payment
      tags:
      - payments
  /payment-service/api/v1/payments/customer/{id}:
    get:
      consumes:
      - application/json
      description: Retrieve a list of payments made by a specific customer
      parameters:
      - description: Customer ID
        in: path
        name: id
        required: true
        type: integer
      - description: Page
        in: query
        name: page
        type: integer
      - description: Search keyword
        in: query
        name: keyword
        type: string
      - description: Filter property (e.g. date, price)
        in: query
        name: filterProp
        type: string
      - description: Sort order (ASC or DESC)
        in: query
        name: order
        type: string
      - description: Payment Method (e.g. VTP, GHTK)
        in: query
        name: method
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.PaginationDataResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "401":
          description: You have no rights to access this action.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "500":
          description: There is something wrong in the system during the process.
            Please try again later.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Get payments by user ID
      tags:
      - payments
  /payment-service/api/v1/payments/update:
    put:
      consumes:
      - application/json
      description: Update payment details
      parameters:
      - description: UpdatePaymentRequest
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.UpdatePaymentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "400":
          description: Invalid data. Please try again.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "401":
          description: You have no rights to access this action.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
        "500":
          description: There is something wrong in the system during the process.
            Please try again later.
          schema:
            $ref: '#/definitions/response.MessageApiResponse'
      security:
      - BearerAuth: []
      summary: Update a payment record
      tags:
      - payments
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
